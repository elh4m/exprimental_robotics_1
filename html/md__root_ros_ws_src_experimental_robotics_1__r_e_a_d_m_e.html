<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>first_assignment: Project 1 - Experimental Robotics (MSc Robotics Engineering, Unige)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">first_assignment<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">code explanation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Project 1 - Experimental Robotics (MSc Robotics Engineering, Unige) </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The following repository contains a ROS package for a toy simulation of Clauedo game in which a robot explore the environment for hints to find the killer. The environment in this project is an appartment with three rooms in which robot enter one by one to find hints. Based on the discovered hints robot deduces a hypotheses regarding the killer. The deduced hypotheses by robot has to be consistent and correct which means it has to be based on three different types of hints and belongs to set of predefined hypotheses which are considered as corrrect.</p>
<ol type="1">
<li>who: Robot can find a name of a person as a hint which can be a killer e.g: Prof. Plum.</li>
<li>what: Robot can find a name of a weapon as a hint which killer might have used e.g: Dagger.</li>
<li>where: Robot can find a name of random place where the crime might have been committed e.g: Hall.</li>
</ol>
<p>Statement of a consistent hypothesis will be something like this: “Prof. Plum with the Dagger in the Hall”. Incase the deduced hypotheses is wrong then the robot will visit the three rooms again for new hints until it forms a consistent hypotheses.</p>
<p>To deduced an hypothesis robot use the ARMOR package service which is developed by researchers at University of Genova. ARMOR is versatile management system that can handle single or multiple-ontology architectures under ROS. Please find more details regarding ARMOR from here: <a href="https://github.com/EmaroLab/armor">https://github.com/EmaroLab/armor</a></p>
<h1><a class="anchor" id="autotoc_md1"></a>
Project Installation:</h1>
<p>This project requires ROS with ARMOR package to be install in the system. Please make sure you have alrady install it before following the instructions. For installing ARMOR package please follow the instructions available in this respository: <a href="https://github.com/EmaroLab/armor">https://github.com/EmaroLab/armor</a></p>
<ol type="1">
<li>Code available in <b>Main</b> branch is a ROS package which should be place in ROS workspace {ros_ws}/src after downloading.</li>
<li>To successfully deploy and build the package run the following command. <div class="fragment"><div class="line">catkin_make</div>
<div class="line">cd devel/</div>
<div class="line">source setup.bash</div>
</div><!-- fragment --></li>
<li>In order to use the python modules contained in armor_py_api package run the following command to add the path of the armor python modules to your PYTHONPATH environmental variable. <div class="fragment"><div class="line">export PYTHONPATH=$PYTHONPATH:/root/ros_ws/src/armor/armor_py_api/scripts/armor_api/</div>
</div><!-- fragment --></li>
<li>Download the 'cluedo_ontology.owl' file provided in this repository and place it in the '/root/Desktop/' directory.</li>
</ol>
<h1><a class="anchor" id="autotoc_md2"></a>
Running the Project Simulation:</h1>
<ol type="1">
<li>After successfully installing the python package and other dependecies open a command window and start ROS master by using the following command: <div class="fragment"><div class="line">roscore&amp;</div>
</div><!-- fragment --></li>
<li>After that start the ARMOR service by using the following command: <div class="fragment"><div class="line">rosrun armor execute it.emarolab.armor.ARMORMainService</div>
</div><!-- fragment --></li>
<li>Open the new tab in command terminal and run the ROS package launch file to start the simulation by using the following command: <div class="fragment"><div class="line">roslaunch exporobot_assignment1 exporobot_assignment1.launch</div>
</div><!-- fragment --> After running the command wait for the system to load all the files. Once all nodes are loaded, the <a class="el" href="namespaceuser__interface.html">user_interface</a> node will ask to press 1. Upon pressing 1, the simulation will start.</li>
</ol>
<h1><a class="anchor" id="autotoc_md3"></a>
Software Architecture of the Project:</h1>
<p>The project architecture is consist of four python nodes.</p>
<ol type="1">
<li><a class="el" href="user__interface_8py.html" title="This file contains code for &#39;user_interface&#39; node.">user_interface.py</a></li>
<li><a class="el" href="motion__controller_8py.html" title="This file contains code for controlling motion of the robot.">motion_controller.py</a></li>
<li><a class="el" href="hint__generator_8py.html" title="This file contains code for hint generator node.">hint_generator.py</a></li>
<li><a class="el" href="oracle_8py.html" title="This file contains code for oracle node.">oracle.py</a></li>
</ol>
<p><img src="https://user-images.githubusercontent.com/61094879/142053996-5c6eaebb-67bb-4f27-918d-5f2c659b772f.jpg" alt="experimental_robotics_assignment1" class="inline"/></p>
<p>'<a class="el" href="user__interface_8py.html" title="This file contains code for &#39;user_interface&#39; node.">user_interface.py</a>' node communicates with the user and as per the provided commands, instruct the system to behave accordingly. If the user press 1 in the terminal, it request '/user interface' service which is hosted by '<a class="el" href="motion__controller_8py.html" title="This file contains code for controlling motion of the robot.">motion_controller.py</a>' node to start the robot simuation. Upon recieving the service request, <a class="el" href="namespacemotion__controller.html">motion_controller</a> node starts the robot simulation in which robot visits Room1, Room2, and Room3 which have pre-defined coordinates(R1(2,0), R2(0,2), R3(-2,0)) in a X-Y axes grid. The robot starts the exploration from a predefined initial position P with coordinates (1,1).</p>
<p><img src="https://user-images.githubusercontent.com/61094879/142056609-ae997ab8-51cd-473c-baa9-7c9dc5c5c6d1.jpg" alt="environment" class="inline"/></p>
<p>After reaching in any room the robot request for the hint from the <a class="el" href="namespacehint__generator.html">hint_generator</a> node by calling the '/request_hint' service. The <a class="el" href="namespacehint__generator.html">hint_generator</a> node respond to this request by generating a random hint from predefined lists of hints.</p>
<div class="fragment"><div class="line">people = [&#39;Rev. Green&#39;,&#39;Prof. Plum&#39;,&#39;Col. Mustard&#39;,&#39;Mrs. Peacock&#39;, &#39;Miss. Scarlett&#39;, &#39;Mrs. White&#39;]</div>
<div class="line">weapons = [&#39;Candlestick&#39;,&#39;Dagger&#39;,&#39;Lead Pipe&#39;,&#39;Revolver&#39;, Rope&#39;, &#39;Spanner&#39;]</div>
<div class="line">places = [&#39;Kitchen&#39;,&#39;Lounge&#39;,&#39;Library&#39;,&#39;Hall&#39;,&#39;Study&#39;, &#39;Ballroom&#39;]</div>
</div><!-- fragment --><p> After recieving the hint, the robot request the '/oracle_service' service which is hosted by oracle node to load the recently discovered hint in the AMOR reasonser. In response to this request, the robot recieve the confirmation feedback if the hint is successfully loaded in the reasoner. After that robot resume its exploration by visiting other rooms and repeating the same setups of requesting services for getting hints and then later loading hints in the reasoner. Once the robot has visited all the rooms and collected all the hints then it once again request '/oracle_service' to starts the reasoner to deduced the hypotheses and then to check if the hypotheses based on recenlty loaded hints is conistent or not. If the hints are consistent then the robot go to the origin position O (0,0) and check hypotheses correctness. Hypotheses is correct if it is consistence and belong to a predefined list of hypotheses in oracle node. If hypotheses is also correct then print the hypotheses statement (e.g: “Prof. Plum with the Dagger in the Hall”) on the terminal screen, otherwise it repeats the exploration again starting from Room1.</p>
<p>The oracle node itself used the '/armor_interface_srv' sevice which is hosted by ARMOR package. When it recieve the request from <a class="el" href="namespacemotion__controller.html">motion_controller</a> node then it forward this request to the following service making itself working as a bridge between <a class="el" href="namespacemotion__controller.html">motion_controller</a> and ARMOR package. The idea of having the oracle node in the first place is debatable but in this project the decision for having this node was taken for the purpose of clarity in software architecture and for assigning dedicated task to each node.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Project Simulation Demo:</h1>
<p><a href="https://user-images.githubusercontent.com/61094879/142734090-305dbd75-fc06-49ff-b726-deb3692156a3.mp4">https://user-images.githubusercontent.com/61094879/142734090-305dbd75-fc06-49ff-b726-deb3692156a3.mp4</a></p>
<h1><a class="anchor" id="autotoc_md5"></a>
Code Documentation:</h1>
<p>The code documentation is done using tools Doxygen and Sphinx. In the <b>main</b> branch the doxygen documentation can be found and for sphinx there is second branch in this respository named <b>sphinx</b>.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Contant Info:</h1>
<ol type="1">
<li>Author: ELham Mohammadi</li>
<li>Email: <a href="#" onclick="location.href='mai'+'lto:'+'Elh'+'am'+'.mo'+'ha'+'mma'+'di'+'201'+'54'+'@gm'+'ai'+'l.c'+'om'; return false;">Elham<span class="obfuscator">.nosp@m.</span>.moh<span class="obfuscator">.nosp@m.</span>ammad<span class="obfuscator">.nosp@m.</span>i201<span class="obfuscator">.nosp@m.</span>54@gm<span class="obfuscator">.nosp@m.</span>ail.<span class="obfuscator">.nosp@m.</span>com</a> </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
